# kana-aggregator-solidity (TRON Deployment)

**Initialise a project**

```
npm i tronbox
mkdir project
cd project
tronbox init
```

**Config**

tronbox.js

```js
module.exports = {
    compilers: {
        solc: {
            version: '0.8.9'
        }
    },
...
...
...
  shasta: {
    privateKey: process.env.PRIVATE_KEY_SHASTA,
    userFeePercentage: 50,
    feeLimit: 1000 * 1e6,
    fullHost: "https://api.shasta.trongrid.io",
    network_id: "2",
  },
...
...
...
};
```

**Compile**

```
tronbox compile

// output

Compiling ./contracts/Errors/GenericErrors.sol...
Compiling ./contracts/Facets/DexManagerFacet.sol...
Compiling ./contracts/Facets/GenericSwapFacet.sol...
Compiling ./contracts/Facets/LayerZeroFacet.sol...
Compiling ./contracts/Facets/WormholeFacet.sol...
Compiling ./contracts/Helpers/ReentrancyGuard.sol...
Compiling ./contracts/Helpers/SwapperV2.sol...
Compiling ./contracts/Helpers/Validatable.sol...
Compiling ./contracts/Interfaces/IDiamondCut.sol...
Compiling ./contracts/Interfaces/IKana.sol...
Compiling ./contracts/Interfaces/ILayerZeroEndpoint.sol...
Compiling ./contracts/Interfaces/ILayerZeroUserApplicationConfig.sol...
Compiling ./contracts/Interfaces/IWormholeRouter.sol...
Compiling ./contracts/Libraries/LibAccess.sol...
Compiling ./contracts/Libraries/LibAllowList.sol...
Compiling ./contracts/Libraries/LibAsset.sol...
Compiling ./contracts/Libraries/LibBytes.sol...
Compiling ./contracts/Libraries/LibDiamond.sol...
Compiling ./contracts/Libraries/LibMappings.sol...
Compiling ./contracts/Libraries/LibSwap.sol...
Compiling ./contracts/Libraries/LibUtil.sol...
Compiling @openzeppelin/contracts/token/ERC20/ERC20.sol...
Compiling @openzeppelin/contracts/token/ERC20/IERC20.sol...
Compiling @openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol...
Compiling @openzeppelin/contracts/token/ERC20/extensions/draft-IERC20Permit.sol...
Compiling @openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol...
Compiling @openzeppelin/contracts/utils/Address.sol...
Compiling @openzeppelin/contracts/utils/Context.sol...
Writing artifacts to ./build/contracts
```

**DEPLOYMENT (SHASTA)**

Deploying the contracts on shastra testnet network.

Scripts :

- tronboxproject/migrations/000_initial_migration.js
- tronboxproject/migrations/001_deploy_initial_facets.js

```
npx tronbox migrate --reset --network shasta
```

```
OUTPUT
------

Running migration: 001_initial_faucet_deploy.js
  Replacing DexManagerFacet...
  DexManagerFacet:
    (base58) TCW2QVzHruuswxgApW32cQCRNrYeT7NnVA
    (hex) 411bc44d2a3fba229fc4f6704e5bb0902ee3e3a94e
DexManagerFaucet deployed ✅
  Deploying DiamondLoupeFacet...
  DiamondLoupeFacet:
    (base58) TAdJyBYedg5Kn4ASFrYxHrc4WAUrLBX9xE
    (hex) 410734c9c04c010a13f4dbe9d1a3ade406ac59585c
DiamondLoupeFacet deployed ✅
  Deploying GenericSwapFacet...
  GenericSwapFacet:
    (base58) TTTJQzki7PAkEszNPqYxU9mqnbzZvsWb24
    (hex) 41bfca4db648bdcc43175d1f569c8c3ea4d53623a4
GenericSwapFacet deployed ✅
  Deploying OwnershipFacet...
  OwnershipFacet:
    (base58) TDPhYokWq851SPJAQ8RCwEYuAZoECD3cQu
    (hex) 41258a30ca23312c0be2e13a5246837c57d87d68e5
OwnershipFacet deployed ✅
Deploying DiamondCutFacet...
  DiamondCutFacet:
    (base58) TFNhYCERXNvQwtgDRzKgufqDZcFxTsZnRD
    (hex) 413b4a0472c69ff2ff2932876f5d582f747242bf20
DiamondCutFacet deployed ✅
  Deploying KanaDiamond...
  KanaDiamond:
    (base58) TAJPmcLnUHi2jcp2jcP3nakJYMFBh5hqER
    (hex) 4103a0e45d6d5fcf41145d22894287a857f68cf22f
Saving successful migration to network...
Saving artifacts...
```

### Addresses

```
DexManagerFacet : TCW2QVzHruuswxgApW32cQCRNrYeT7NnVA
DiamondLoupeFacet : TAdJyBYedg5Kn4ASFrYxHrc4WAUrLBX9xE
GenericSwapFacet : TTTJQzki7PAkEszNPqYxU9mqnbzZvsWb24
OwnershipFacet : TDPhYokWq851SPJAQ8RCwEYuAZoECD3cQu
DiamondCutFacet : TFNhYCERXNvQwtgDRzKgufqDZcFxTsZnRD
KanaDiamond : TAJPmcLnUHi2jcp2jcP3nakJYMFBh5hqER
```
